(()=>{"use strict";var t={919:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var i=function(t){function e(e,n,r,o){return e instanceof Array?t.call(this,e)||this:"number"==typeof e?t.call(this,[e,n,r,null!=o?o:0])||this:t.call(this,[0,0,0,null!=o?o:0])||this}return o(e,t),Object.defineProperty(e.prototype,"red",{get:function(){return this.x},set:function(t){this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.y},set:function(t){this.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.z},set:function(t){this.z=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.w},set:function(t){this.w=t},enumerable:!1,configurable:!0}),e.prototype.plus=function(n){return new e(t.prototype.plus.call(this,n).vals)},e.prototype.minus=function(n){return new e(t.prototype.minus.call(this,n).vals)},e.prototype.times=function(n){return new e(t.prototype.times.call(this,n).vals)},e.black=function(){return new e(0,0,0)},e}(n(212).Tuple);e.Color=i},858:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var i=n(869),u=function(t){function e(e,n,r){return e instanceof Array?t.call(this,e)||this:"number"==typeof e?t.call(this,[e,n,r,1])||this:t.call(this,[0,0,0,1])||this}return o(e,t),e.prototype.plus=function(e){return t.prototype.plus.call(this,e)},e.prototype.minus=function(e){return t.prototype.minus.call(this,e)},e.prototype.negate=function(){return e.zero().minus(this)},e.zero=function(){return new e},e.prototype.toMatrix=function(){var t=[];return this.vals.map((function(e,n){t.push([e])})),t.push([1]),new i.Matrix(t)},e}(n(212).Tuple);e.Point=u},212:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tuple=void 0;var r=n(869),o=function(){function t(t,e,n,r){this.vals=t instanceof Array?t:"number"==typeof t?[t,e,n,null!=r?r:0]:[0,0,0,null!=r?r:0]}return Object.defineProperty(t.prototype,"x",{get:function(){return this.vals[0]},set:function(t){this.vals[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.vals[1]},set:function(t){this.vals[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.vals[2]},set:function(t){this.vals[2]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.vals[3]},set:function(t){this.vals[3]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPoint",{get:function(){return 1==this.w},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVector",{get:function(){return 0==this.w},enumerable:!1,configurable:!0}),t.prototype.plus=function(e){return new t(this.vals.map((function(t,n){return t+e.vals[n]})))},t.prototype.minus=function(e){return new t(this.vals.map((function(t,n){return t-e.vals[n]})))},t.prototype.negate=function(){return t.zero().minus(this)},t.prototype.times=function(e){return new t(e instanceof t?this.vals.map((function(t,n){return t*e.vals[n]})):this.vals.map((function(t){return t*e})))},t.prototype.dividedBy=function(e){return new t(this.vals.map((function(t){return t/e})))},t.prototype.magnitude=function(){var t=this.vals.map((function(t){return t*t})).reduce((function(t,e){return t+e}));return Math.sqrt(t)},t.prototype.normalize=function(){var e=this.magnitude();return new t(this.vals.map((function(t){return t/e})))},t.prototype.dot=function(t){return this.vals.map((function(e,n){return e*t.vals[n]})).reduce((function(t,e){return t+e}))},t.prototype.cross=function(e){var n=this,r=[0,1,2].map((function(t){var r=(t+1)%3,o=(r+1)%3;return n.vals[r]*e.vals[o]-n.vals[o]*e.vals[r]}));return r.push(0),new t(r)},t.prototype.toMatrix=function(){var t=[];return this.vals.map((function(e,n){t.push([e])})),new r.Matrix(t)},t.zero=function(){return new t},t}();e.Tuple=o},894:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0,e.Map=function(t,e,n,r,o){var i=(t-e)*(o-r)/(n-e)+r;return i=Math.min(o,i),i=Math.max(r,i),Math.round(i)}},869:function(t,e,n){var r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var o=n(212),i=function(){function t(t){if(Array.isArray(t))this.m=t;else{var e=null!=t?t:4;this.m=Array(e);for(var n=0;n<e;n++)this.m[n]=Array(e).fill(0)}}return t.create=function(e){return Object.create(t.prototype)},Object.defineProperty(t.prototype,"columns",{get:function(){return this.m[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this.m.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.columns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"invertible",{get:function(){return 0!=this.determinant()},enumerable:!1,configurable:!0}),t.prototype.times=function(e){for(var n=e instanceof o.Tuple?e.toMatrix():e,r=new t,i=function(t){for(var e=0;e<u.rows;e++){var o=u.m[e].map((function(e,r){return e*n.m[r][t]})).reduce((function(t,e){return t+e}),0);r.m[e][t]=o}},u=this,s=0;s<this.columns;s++)i(s);return e instanceof o.Tuple?r.toTuple():r},t.prototype.transpose=function(){for(var e=new t,n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)e.m[n][r]=this.m[r][n];return e},t.prototype.inverse=function(){if(!this.invertible)return new t;for(var e=new t(this.size),n=0;n<this.size;n++)for(var r=0;r<this.size;r++){var o=this.cofactor(n,r);e.m[r][n]=o/this.determinant()}return e},t.prototype.determinant=function(){var t=0;if(2==this.size)t=this.m[0][0]*this.m[1][1]-this.m[0][1]*this.m[1][0];else for(var e=0;e<this.size;e++)t+=this.m[0][e]*this.cofactor(0,e);return t},t.prototype.clone=function(){return this.m.map((function(t){return r([],t,!0)}))},t.prototype.submatrix=function(e,n){var r=this.clone().map((function(t){return t.splice(n,1),t}));return r.splice(e,1),new t(r)},t.prototype.minor=function(t,e){return this.submatrix(t,e).determinant()},t.prototype.cofactor=function(t,e){var n=this.minor(t,e);return(t+e)%2==0?n:-n},t.prototype.toTuple=function(){for(var t=[],e=0;e<4;e++)t.push(this.m[e][0]);return new o.Tuple(t)},t.prototype.getIdentity=function(){return t.identity().times(this)},t.prototype.rotate=function(e,n){return t.rotate(e,n).times(this)},t.rotate=function(e,n){var r=t.identity();switch(e){case"x":return t.rotation_x(n).times(r);case"y":return t.rotation_y(n).times(r);case"z":return t.rotation_z(n).times(r)}},t.prototype.scale=function(e,n,r){return t.scale(e,n,r).times(this)},t.prototype.shear=function(e,n,r,o,i,u){return t.shear(e,n,r,o,i,u).times(this)},t.prototype.translate=function(e,n,r){return t.translate(e,n,r).times(this)},t.identity=function(){for(var e=new t,n=0;n<e.columns;n++)e.m[n][n]=1;return e},t.translate=function(e,n,r){var o=t.identity();return o.m[0][3]=e,o.m[1][3]=n,o.m[2][3]=r,o},t.scale=function(e,n,r){var o=t.identity();return o.m[0][0]=e,o.m[1][1]=n,o.m[2][2]=r,o},t.rotation_x=function(e){var n=t.identity();return n.m[1][1]=Math.cos(e),n.m[1][2]=-Math.sin(e),n.m[2][1]=Math.sin(e),n.m[2][2]=Math.cos(e),n},t.rotation_y=function(e){var n=t.identity();return n.m[0][0]=Math.cos(e),n.m[2][0]=-Math.sin(e),n.m[0][2]=Math.sin(e),n.m[2][2]=Math.cos(e),n},t.rotation_z=function(e){var n=t.identity();return n.m[0][0]=Math.cos(e),n.m[0][1]=-Math.sin(e),n.m[1][0]=Math.sin(e),n.m[1][1]=Math.cos(e),n},t.shear=function(e,n,r,o,i,u){var s=t.identity();return s.m[0][1]=e,s.m[0][2]=n,s.m[1][0]=r,s.m[1][2]=o,s.m[2][0]=i,s.m[2][1]=u,s},t}();e.Matrix=i},149:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var r=n(919),o=n(894),i=function(){function t(t,e){this.colorRange=255,this.width=t,this.height=e,this.pixels=new Array(t*e)}return t.prototype.writePixel=function(t,e,n){this.pixels[this.getIndex(t,e)]=n},t.prototype.writeAllPixels=function(t){for(var e=0;e<this.pixels.length;e++)this.pixels[e]=t},t.prototype.getPixels=function(){var t=this;return this.pixels.map((function(e){return new r.Color(t.colorOf(e.red),t.colorOf(e.green),t.colorOf(e.blue))}))},t.prototype.pixelAt=function(t,e){return this.pixels[this.getIndex(t,e)]},t.prototype.colorOf=function(t){return(0,o.Map)(t,0,1,0,this.colorRange)},t.prototype.getIndex=function(t,e){return e*this.width+t},t.prototype.toPPM=function(){var t=new Array;return t.push("P3"),t.push("".concat(this.width," ").concat(this.height)),t.push("".concat(this.colorRange)),t.concat(this.writePPMBody())},t.prototype.writePPMBody=function(){for(var t,e=new Array,n=0;n<this.height;n++){for(var o=new Array,i=0;i<this.width;i++){var u=null!==(t=this.pixelAt(i,n))&&void 0!==t?t:new r.Color;o.push(u)}var s=this.splitIntoRowsForLengthRequirement(o);e=e.concat(s)}return e},t.prototype.splitIntoRowsForLengthRequirement=function(t){var e=this,n=new Array,r="";return t.forEach((function(t){for(var o=0;o<3;o++){var i="".concat(e.colorOf(t.vals[o])," ");r.length+i.length>71&&(n.push(r.trim()),r=""),r+=i}})),n.push(r.trim()),n},t}();e.Canvas=i}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(()=>{var t=n(919),e=n(858),r=n(869),o=n(149),i=(document.getElementById("app"),document.getElementById("kami-canvas")),u=i.getContext("2d"),s=i.width,a=i.height,c=new o.Canvas(s,a),p=new t.Color(1,.5,0);c.writeAllPixels(p);var l=new e.Point;r.Matrix.translate(s/2,a/2,0).times(l),c.writePixel(l.x,l.y,t.Color.black());for(var f=c.getPixels(),h=u.createImageData(s,a),y=h.data,m=0;m<y.length;m+=4){var v=f[m/4];null!=v&&(y[m+0]=v.red,y[m+1]=v.green,y[m+2]=v.blue,y[m+3]=255)}u.putImageData(h,0,0)})()})();